<form [formGroup]='anketaForm' (ngSubmit)='submitAnketa()'>
    <div class="row">
        <div class="col-lg-6 m-b-40">
            <nav>
                <div class="nav nav-tabs">
                    <a *ngIf='languages.includes("cs")' (click)='changeLang("cs")' [ngClass]='{"active": lang=="cs"}'
                        class="nav-item nav-link">Cs</a>
                    <a *ngIf='languages.includes("en")' (click)='changeLang("en")' [ngClass]='{"active": lang=="en"}'
                        class="nav-item nav-link">En</a>
                    <a *ngIf='languages.includes("de")' (click)='changeLang("de")' [ngClass]='{"active": lang=="de"}'
                        class="nav-item nav-link">De</a>
                </div>
            </nav>
            <div class="au-card au-card--no-pad" id="new-anketa-tab">
                <div class="au-card-title">
                    <h3>Nová anketa</h3>
                    <div class="bg-overlay bg-overlay--skoda"></div>
                </div>
                <div class="card-body">
                    <!-- <h3 class="title-2">Nová anketa</h3> -->
                    <div class="form-group" [formGroup]='nameForm' *ngIf='lang=="cs"'>
                        <label class="form-control-label" for="name">Název ankety</label>
                        <input formControlName='cs' class="form-control" type="text" placeholder="" />
                    </div>
                    <div class="form-group" [formGroup]='nameForm' *ngIf='lang=="en"'>
                        <label class="form-control-label" for="name">Název ankety</label>
                        <input formControlName='en' class="form-control" type="text" placeholder="" />
                        <small>Název v češtině: {{this.nameForm.value.cs}}</small>
                    </div>
                    <div class="form-group" [formGroup]='nameForm' *ngIf='lang=="de"'>
                        <label class="form-control-label" for="name">Název ankety</label>
                        <input formControlName='de' class="form-control" type="text" placeholder="" />
                        <small>Název v češtině: {{this.nameForm.value.cs}}</small>
                    </div>
                    <div class="form-group" [formGroup]='descForm' *ngIf='lang=="cs"'>
                        <label class="form-control-label" for="name">Popis ankety</label>
                        <textarea formControlName='cs' class="form-control" rows="3" cols="80"></textarea>
                    </div>
                    <div class="form-group" [formGroup]='descForm' *ngIf='lang=="en"'>
                        <label class="form-control-label" for="name">Popis ankety</label>
                        <textarea formControlName='en' class="form-control" rows="3" cols="80"></textarea>
                        <small>Popis v češtině: {{this.descForm.value.cs}}</small>
                    </div>
                    <div class="form-group" [formGroup]='descForm' *ngIf='lang=="de"'>
                        <label class="form-control-label" for="name">Popis ankety</label>
                        <textarea formControlName='de' class="form-control" rows="3" cols="80"></textarea>
                        <small>Popis v češtině: {{this.descForm.value.cs}}</small>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 m-b-40 m-t-40">
            <div class="au-card au-card--no-pad">
                <div class="au-card-title">
                    <h3>Možnosti</h3>
                    <div class="bg-overlay bg-overlay--skoda"></div>
                </div>
                <div class="card-body">
                    <label class="switch switch-3d switch-skoda mr-3">
                        <input formControlName='random_order' class="switch-input" type="checkbox" /><span
                            class="switch-label"></span><span class="switch-handle"></span>
                    </label><span>Náhodné pořadí otázek</span><br />
                    <label class="switch switch-3d switch-skoda mr-3">
                        <input formControlName='user_data' class="switch-input" type="checkbox" /><span
                            class="switch-label"></span><span class="switch-handle"></span>
                    </label><span>Přidat identifikaci</span><br />
                    <label class="switch switch-3d switch-skoda mr-3">
                        <input (click)='toggleLang("en")' class="switch-input" type="checkbox" /><span
                            class="switch-label"></span><span class="switch-handle"></span>
                    </label><span>Otázky v angličtině</span><br />
                    <label class="switch switch-3d switch-skoda mr-3">
                        <input (click)='toggleLang("de")' class="switch-input" type="checkbox" /><span
                            class="switch-label"></span><span class="switch-handle"></span>
                    </label><span>Otázky v němčině</span><br />

                </div>
            </div>

        </div>

        <div class="col-lg-6 m-b-40">
            <div class="au-card au-card--no-pad">
                <div class="card-body">
                    <div formArrayName='answers' class="form-group">
                        <label class="form-control-label" for="name">Odpovědi</label>
                        <div *ngFor='let answer of answerForms.controls; let i=index' [formGroupName]='i'>
                            <input *ngIf='lang=="cs"' formControlName='cs' class="form-control mb-3" type="text" />
                        </div>
                        <div *ngFor='let answer of answerForms.controls; let i=index' [formGroupName]='i'>
                            <div *ngIf='lang=="en"'>
                                <input formControlName='en' class="form-control mb-3" type="text" />
                                <small>Odpověď v češtině: {{this.answerForms.value[i].cs}}</small>
                            </div>
                        </div>
                        <div *ngFor='let answer of answerForms.controls; let i=index' [formGroupName]='i'>
                            <div *ngIf='lang=="de"'>
                                <input formControlName='de' class="form-control mb-3" type="text" />
                                <small>Odpověď v češtině: {{this.answerForms.value[i].cs}}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <!-- QUESTIONS -->
    <div formArrayName='questions'>
        <div *ngFor='let question of questionForms.controls; let i=index' [formGroupName]='i' class="row">
            <div class="col-lg-12 m-b-40" id="question0">
                <div class="au-card au-card--no-pad">
                    <div class="au-card-title">
                        <i class="fas fa-times question-delete" (click)='deleteQuestion(i)'></i>
                        <h3>Otázka #{{i+1}} </h3>
                        <div class="bg-overlay bg-overlay--skoda"></div>
                    </div>
                    <div class="card-body">
                        <label class="switch switch-3d switch-skoda mr-3">
                            <input formControlName='open' class="switch-input" type="checkbox" /><span
                                class="switch-label"></span><span class="switch-handle"></span>
                        </label><span>Otevřená otázka</span><br />
                        <div *ngIf='lang=="cs"' class="form-group">
                            <label class="form-control-label" for="name">Otázka v češtině</label>
                            <input formControlName='cs' class="form-control" type="text" />
                        </div>
                        <div *ngIf='lang=="en"' class="form-group">
                            <label class="form-control-label" for="name">Otázka v angličtině</label>
                            <input formControlName='en' class="form-control" type="text" />
                            <small>Otázka v češtině: {{this.questionForms.value[i].cs}}</small>
                        </div>
                        <div *ngIf='lang=="de"' class="form-group">
                            <label class="form-control-label" for="name">Otázka v němčině</label>
                            <input formControlName='de' class="form-control" type="text" />
                            <small>Otázka v češtině: {{this.questionForms.value[i].cs}}</small>
                        </div>
                        <div class="form-group">
                            <label class="form-control-label" for="name">Obrázek otázky</label>
                            <input class="form-control-file" type="file" enctype="multipart/form-data"
                                (change)='onFileChange($event, i)' />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button (click)='addQuestion()' class="au-btn au-btn-icon btn-block au-btn--secondary m-b-10" type="button"><i
            class="zmdi zmdi-plus"></i>Přidat otázku</button>
    <button class="au-btn au-btn--skoda btn-block m-b-40" type="submit">Vytvořit
        anketu</button>
</form>